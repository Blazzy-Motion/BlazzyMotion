@page "/docs/api"
@using BlazzyMotion.Demo.Services
@using BlazzyMotion.Demo.Icons

<PageTitle>API Reference - BlazzyMotion</PageTitle>

<PageHeader Title="API Reference"
  Subtitle="Complete reference for BzCarousel component parameters and attributes" Version="@AppVersions.Carousel"
  Framework="@AppVersions.DotNetVersion">
  <IconContent>@Icons.Code</IconContent>
</PageHeader>

<!-- COMPONENT PARAMETERS -->
<DocSection Title="Component Parameters">
  <IconContent>@Icons.Settings</IconContent>
  <ChildContent>
    <p>BzCarousel accepts the following parameters to customize its behavior and appearance.</p>
  </ChildContent>
</DocSection>

<!-- DATA PARAMETERS -->
<DocSection Title="Data Parameters">
  <IconContent>@Icons.BarChart</IconContent>
  <ChildContent>
    <p>Parameters for binding data and handling events.</p>
    <ApiTable Parameters="@_dataParameters" />
  </ChildContent>
</DocSection>

<!-- APPEARANCE PARAMETERS -->
<DocSection Title="Appearance Parameters">
  <IconContent>@Icons.Palette</IconContent>
  <ChildContent>
    <p>Parameters for visual customization.</p>
    <ApiTable Parameters="@_appearanceParameters" />
  </ChildContent>
</DocSection>

<!-- BEHAVIOR PARAMETERS -->
<DocSection Title="Behavior Parameters">
  <IconContent>@Icons.Wrench</IconContent>
  <ChildContent>
    <p>Parameters for controlling carousel behavior.</p>
    <ApiTable Parameters="@_behaviorParameters" />
  </ChildContent>
</DocSection>

<!-- EFFECT PARAMETERS -->
<DocSection Title="Effect Parameters">
  <IconContent>@Icons.Sparkles</IconContent>
  <ChildContent>
    <p>Parameters for 3D coverflow effect customization.</p>
    <ApiTable Parameters="@_effectParameters" />
  </ChildContent>
</DocSection>

<!-- ADVANCED PARAMETERS -->
<DocSection Title="Advanced Parameters">
  <IconContent>@Icons.Rocket</IconContent>
  <ChildContent>
    <p>Parameters for advanced configuration and custom templates.</p>
    <ApiTable Parameters="@_advancedParameters" />
  </ChildContent>
</DocSection>

<!-- ATTRIBUTES -->
<DocSection Title="Attributes">
  <IconContent>@Icons.Tag</IconContent>
  <ChildContent>
    <p>Use these attributes on your model properties to enable automatic template generation.</p>
  </ChildContent>
</DocSection>

<!-- BzImage Attribute -->
<DocSection Title="[BzImage]">
  <IconContent>@Icons.Image</IconContent>
  <ChildContent>
    <p>Marks a property as the image source for carousel items. The Source Generator creates a default template using this
      property.</p>

    <h4 class="bz-mt-2">Requirements</h4>
    <ul class="bz-list">
      <li>Property must be <code>public</code></li>
      <li>Property must be of type <code>string</code></li>
      <li>Only one property per class should have this attribute</li>
    </ul>

    <h4 class="bz-mt-2">Usage</h4>
    <CodeBlock Language="csharp" Code="@_bzImageExample" />
  </ChildContent>
</DocSection>

<!-- BzTitle Attribute -->
<DocSection Title="[BzTitle]">
  <IconContent>@Icons.Pen</IconContent>
  <ChildContent>
    <p>Marks a property as the title/alt text for carousel items. Used for accessibility attributes on generated
      <code>img</code> elements.</p>
    <CodeBlock Language="csharp" Code="@_bzTitleExample" />
  </ChildContent>
</DocSection>

<!-- BzDescription Attribute -->
<DocSection Title="[BzDescription]">
  <IconContent>@Icons.FileText</IconContent>
  <ChildContent>
    <p>Reserved for future use (tooltips, captions, etc.). Currently not used by the default template generator.</p>
    <CodeBlock Language="csharp" Code="@_bzDescriptionExample" />
  </ChildContent>
</DocSection>

<!-- TOUCH OPTIONS -->
<DocSection Title="Touch Options">
  <IconContent>@Icons.Hand</IconContent>
  <ChildContent>
    <p>BlazzyMotion.Carousel includes mobile-optimized touch settings. Configure via <code>BzCarouselOptions</code>.</p>
    <ApiTable Parameters="@_touchOptions" />
  </ChildContent>
</DocSection>

<!-- VALIDATION -->
<DocSection Title="Validation & Diagnostics">
  <IconContent>@Icons.AlertTriangle</IconContent>
  <ChildContent>
    <p>The Source Generator provides compile-time validation with helpful error messages.</p>

    <h4 class="bz-mt-2">BZC001: Non-Public Property</h4>
    <CodeBlock Language="text" Code="Error BZC001: Property 'ImageUrl' with [BzImage] attribute must be public" />
    <p><strong>Fix:</strong> Change property accessibility to <code>public</code>.</p>

    <h4 class="bz-mt-2">BZC002: Non-String Property</h4>
    <CodeBlock Language="text"
      Code="Error BZC002: Property 'ImageData' with [BzImage] attribute must be of type 'string'" />
    <p><strong>Fix:</strong> Ensure the property is of type <code>string</code> (URL or path).</p>
  </ChildContent>
</DocSection>

<!-- NEXT STEPS -->
<DocSection Title="Next Steps">
  <IconContent>
    <svg class="bz-icon" viewBox="0 0 24 24">
      <line x1="5" y1="12" x2="19" y2="12"/>
      <polyline points="12 5 19 12 12 19"/>
    </svg>
  </IconContent>
  <ChildContent>
    <div class="bz-flex bz-gap-2" style="flex-wrap: wrap;">
      <a href="/docs/css-variables" class="bz-btn bz-btn--primary">
        CSS Variables
      </a>
      <a href="/docs/examples" class="bz-btn bz-btn--secondary">
        View Examples
      </a>
    </div>
  </ChildContent>
</DocSection>

@code {
  // DATA PARAMETERS
  private List<ApiTable.ApiParameter> _dataParameters = new()
{
new() { Name = "Items", Type = "IEnumerable<TItem>", Default = null, Description = "Collection of items to display in the carousel", Required = true },
new() { Name = "ItemTemplate", Type = "RenderFragment<TItem>?", Default = "null", Description = "Custom template for rendering items (overrides generated template)", Required = false },
new() { Name = "OnItemSelected", Type = "EventCallback<TItem>", Default = "—", Description = "Callback invoked when an item is clicked", Required = false },
new() { Name = "OnActiveItemChanged", Type = "EventCallback<TItem>", Default = "—", Description = "Callback fired on every scroll/swipe, ideal for preview panels", Required = false },
new() { Name = "OnActiveIndexChanged", Type = "EventCallback<int>", Default = "—", Description = "Callback fired with zero-based slide index on change", Required = false }
};

  // APPEARANCE PARAMETERS
  private List<ApiTable.ApiParameter> _appearanceParameters = new()
{
new() { Name = "Theme", Type = "BzTheme", Default = "Glass", Description = "Visual theme: Glass, Dark, Light, or Minimal", Required = false },
new() { Name = "ShowOverlay", Type = "bool", Default = "true", Description = "Whether to show gradient overlay on slides", Required = false },
new() { Name = "CssClass", Type = "string?", Default = "null", Description = "Additional CSS classes for customization",
Required = false }
};

  // BEHAVIOR PARAMETERS
  private List<ApiTable.ApiParameter> _behaviorParameters = new()
{
new() { Name = "Loop", Type = "bool", Default = "true", Description = "Enable infinite loop navigation", Required =
false },
new() { Name = "InitialSlide", Type = "int", Default = "0", Description = "Index of the initially active slide",
Required = false },
new() { Name = "MinItemsForLoop", Type = "int", Default = "4", Description = "Minimum items required to enable loop mode", Required = false },
new() { Name = "SelectOnScroll", Type = "bool", Default = "true", Description = "When false, OnItemSelected fires only on click, not on scroll", Required = false },
new() { Name = "AutoDetectMode", Type = "bool", Default = "true", Description = "Automatically switch between coverflow and simple modes", Required = false },
new() { Name = "MinItemsForCoverflow", Type = "int", Default = "4", Description = "Minimum items for coverflow effect (below uses simple slider)", Required = false }
};

  // EFFECT PARAMETERS
  private List<ApiTable.ApiParameter> _effectParameters = new()
{
new() { Name = "RotateDegree", Type = "int", Default = "50", Description = "Rotation angle for coverflow effect (degrees)", Required = false },
new() { Name = "Depth", Type = "int", Default = "150", Description = "Depth of the coverflow effect", Required = false }
};

  // ADVANCED PARAMETERS
  private List<ApiTable.ApiParameter> _advancedParameters = new()
{
new() { Name = "Options", Type = "BzCarouselOptions?", Default = "null", Description = "Advanced carousel options (overrides individual parameters)", Required = false },
new() { Name = "LoadingTemplate", Type = "RenderFragment?", Default = "null", Description = "Custom loading state template", Required = false },
new() { Name = "EmptyTemplate", Type = "RenderFragment?", Default = "null", Description = "Custom empty state template",
Required = false },
new() { Name = "AdditionalAttributes", Type = "Dictionary<string, object>?", Default = "null", Description = "HTML attributes to splat onto root element (id, aria-*, data-*)", Required = false }
};

  // TOUCH OPTIONS
  private List<ApiTable.ApiParameter> _touchOptions = new()
{
new() { Name = "TouchRatio", Type = "double", Default = "1.0", Description = "Touch sensitivity multiplier (range: 0.1 - 2.0)", Required = false },
new() { Name = "Threshold", Type = "int", Default = "10", Description = "Minimum pixels to trigger swipe (range: 0 - 50)", Required = false },
new() { Name = "ShortSwipes", Type = "bool", Default = "false", Description = "Allow quick flick gestures", Required =
false },
new() { Name = "ResistanceRatio", Type = "double", Default = "0.85", Description = "Edge bounce resistance (range: 0 - 1)", Required = false },
new() { Name = "LongSwipesRatio", Type = "double", Default = "0.3", Description = "Slide width percentage to advance (range: 0.1 - 0.9)", Required = false }
};

  // CODE EXAMPLES
  private string _bzImageExample = @"public class Movie
{
    [BzImage]
    public string Poster { get; set; } = """";

    public string Title { get; set; } = """";
}";

  private string _bzTitleExample = @"public class Movie
{
    [BzImage]
    public string Poster { get; set; } = """";

    [BzTitle]  // Used for alt text
    public string Title { get; set; } = """";
}";

  private string _bzDescriptionExample = @"public class Movie
{
    [BzImage]
    public string Poster { get; set; } = """";

    [BzTitle]
    public string Title { get; set; } = """";

    [BzDescription]  // Reserved for future use
    public string Synopsis { get; set; } = """";
}";
}
